# æœåŠ¡æ¨¡å—é‡æ„æ€»ç»“

## é‡æ„æ¦‚è¿°

æœ¬æ¬¡é‡æ„å°† `lib/core/services/` ç›®å½•ä¸‹çš„æ‰€æœ‰æœåŠ¡æ–‡ä»¶æŒ‰ç…§ä¸šåŠ¡é¢†åŸŸå’ŒèŒè´£è¿›è¡Œäº†ç»†åˆ†ï¼Œå»ºç«‹äº†æ¸…æ™°çš„æ¨¡å—è¾¹ç•Œå’Œä¾èµ–æ–¹å‘ã€‚

## æ–°çš„ç›®å½•ç»“æ„

### ğŸ“ clipboard/ - å‰ªè´´æ¿æ¨¡å—

è´Ÿè´£å‰ªè´´æ¿ç›¸å…³çš„æ‰€æœ‰åŠŸèƒ½ï¼š

- `clipboard_ports.dart` - å‰ªè´´æ¿æœåŠ¡æ¥å£å®šä¹‰
- `clipboard_service.dart` - å‰ªè´´æ¿æœåŠ¡åè°ƒå™¨
- `clipboard_processor.dart` - å‰ªè´´æ¿å†…å®¹å¤„ç†å™¨
- `clipboard_poller.dart` - å‰ªè´´æ¿è½®è¯¢å™¨
- `clipboard_detector.dart` - å‰ªè´´æ¿å†…å®¹æ£€æµ‹å™¨
- `universal_clipboard_detector.dart` - é€šç”¨å‰ªè´´æ¿æ£€æµ‹å™¨
- `optimized_clipboard_manager.dart` - ä¼˜åŒ–çš„å‰ªè´´æ¿ç®¡ç†å™¨
- `clipboard_data.dart` - å‰ªè´´æ¿æ•°æ®æ¨¡å‹
- `index.dart` - æ¨¡å—ç»Ÿä¸€å¯¼å‡º

### ğŸ“ analysis/ - åˆ†ææ¨¡å—

è´Ÿè´£å†…å®¹åˆ†æå’Œè¯­ä¹‰è¯†åˆ«ï¼š

- `analysis_ports.dart` - åˆ†ææœåŠ¡æ¥å£å®šä¹‰
- `content_analyzer.dart` - å†…å®¹åˆ†æå™¨åŸºç±»
- `html_analyzer.dart` - HTML åˆ†æå™¨
- `code_analyzer.dart` - ä»£ç åˆ†æå™¨
- `index.dart` - æ¨¡å—ç»Ÿä¸€å¯¼å‡º

### ğŸ“ storage/ - å­˜å‚¨æ¨¡å—

è´Ÿè´£æ•°æ®å­˜å‚¨å’Œç®¡ç†ï¼š

- `storage_ports.dart` - å­˜å‚¨æœåŠ¡æ¥å£å®šä¹‰
- `database_service.dart` - æ•°æ®åº“æœåŠ¡
- `encryption_service.dart` - åŠ å¯†æœåŠ¡
- `preferences_service.dart` - åå¥½è®¾ç½®æœåŠ¡
- `path_service.dart` - è·¯å¾„æœåŠ¡
- `index.dart` - æ¨¡å—ç»Ÿä¸€å¯¼å‡º

### ğŸ“ performance/ - æ€§èƒ½æ¨¡å—

è´Ÿè´£æ€§èƒ½ç›‘æ§å’Œä¼˜åŒ–ï¼š

- `performance_ports.dart` - æ€§èƒ½æœåŠ¡æ¥å£å®šä¹‰
- `performance_service.dart` - æ€§èƒ½ç›‘æ§æœåŠ¡
- `async_processing_queue.dart` - å¼‚æ­¥å¤„ç†é˜Ÿåˆ—
- `index.dart` - æ¨¡å—ç»Ÿä¸€å¯¼å‡º

### ğŸ“ platform/ - å¹³å°æ¨¡å—

è´Ÿè´£å¹³å°ç‰¹å®šçš„ç³»ç»Ÿé›†æˆï¼š

#### system/ - ç³»ç»ŸæœåŠ¡

- `permission_service.dart` - æƒé™æœåŠ¡
- `autostart_service.dart` - è‡ªå¯åŠ¨æœåŠ¡
- `finder_service.dart` - Finder æœåŠ¡
- `window_listener.dart` - çª—å£ç›‘å¬æœåŠ¡

#### input/ - è¾“å…¥æœåŠ¡

- `hotkey_service.dart` - çƒ­é”®æœåŠ¡

#### ui_tray/ - æ‰˜ç›˜æœåŠ¡

- `tray_service.dart` - ç³»ç»Ÿæ‰˜ç›˜æœåŠ¡

#### ocr/ - OCR æœåŠ¡

- `ocr_service.dart` - OCR æœåŠ¡æ¥å£
- `native_ocr_impl.dart` - åŸç”Ÿ OCR å®ç°

#### files/ - æ–‡ä»¶æœåŠ¡

- `index.dart` - æ–‡ä»¶ç›¸å…³æœåŠ¡å¯¼å‡º

- `platform_ports.dart` - å¹³å°æœåŠ¡æ¥å£å®šä¹‰
- `index.dart` - æ¨¡å—ç»Ÿä¸€å¯¼å‡º

### ğŸ“ operations/ - æ“ä½œæ¨¡å—

è´Ÿè´£è·¨åŸŸçš„ä¸šåŠ¡æ“ä½œï¼š

- `operations_ports.dart` - æ“ä½œæœåŠ¡æ¥å£å®šä¹‰
- `update_service.dart` - æ›´æ–°æœåŠ¡
- `index.dart` - æ¨¡å—ç»Ÿä¸€å¯¼å‡º

### ğŸ“ observability/ - å¯è§‚æµ‹æ€§æ¨¡å—

è´Ÿè´£é”™è¯¯å¤„ç†ã€æ—¥å¿—è®°å½•å’Œå´©æºƒç›‘æ§ï¼š

- `observability_ports.dart` - å¯è§‚æµ‹æ€§æœåŠ¡æ¥å£å®šä¹‰
- `error_handler.dart` - é”™è¯¯å¤„ç†å™¨
- `crash_service.dart` - å´©æºƒç›‘æ§æœåŠ¡
- `logger/` - æ—¥å¿—æœåŠ¡å­æ¨¡å—
  - `logger.dart` - æ—¥å¿—æœåŠ¡å®ç°
  - `adapters/` - æ—¥å¿—é€‚é…å™¨
    - `console_adapter.dart` - æ§åˆ¶å°é€‚é…å™¨
    - `file_adapter.dart` - æ–‡ä»¶é€‚é…å™¨
  - `index.dart` - æ—¥å¿—æ¨¡å—å¯¼å‡º
- `index.dart` - æ¨¡å—ç»Ÿä¸€å¯¼å‡º

## ä¾èµ–æ–¹å‘çº¦æŸ

é‡æ„åçš„ä¾èµ–æ–¹å‘éµå¾ªä»¥ä¸‹åŸåˆ™ï¼š

1. **clipboard** â†’ **analysis**, **storage**, **platform** (å‰ªè´´æ¿æ¨¡å—ä¾èµ–åˆ†æã€å­˜å‚¨å’Œå¹³å°èƒ½åŠ›)
2. **analysis** â†’ **platform** (åˆ†ææ¨¡å—å¯ä¾èµ–å¹³å°é€šç”¨èƒ½åŠ›)
3. **storage** â†’ **platform/files** (å­˜å‚¨æ¨¡å—ä¾èµ–æ–‡ä»¶å¹³å°èƒ½åŠ›)
4. **platform** ä¸ºæœ€åº•å±‚ï¼Œä¸ä¾èµ–ä»»ä½•ä¸šåŠ¡æœåŠ¡
5. **operations** å¯ç¼–æ’ **clipboard**, **analysis**, **storage** (é€šè¿‡ç«¯å£äº¤äº’)
6. **observability** å¯è¢«æ‰€æœ‰å±‚ä½¿ç”¨ï¼Œä½†ä¸ä¾èµ–ä¸šåŠ¡é€»è¾‘

## æ¥å£è®¾è®¡

æ¯ä¸ªæ¨¡å—éƒ½å®šä¹‰äº†æ¸…æ™°çš„ç«¯å£æ¥å£ï¼š

- `*_ports.dart` - å®šä¹‰æ¨¡å—å¯¹å¤–æš´éœ²çš„æ¥å£
- å®ç°ç±»å®ç°å¯¹åº”çš„ç«¯å£æ¥å£
- é€šè¿‡ä¾èµ–æ³¨å…¥ä½¿ç”¨æ¥å£è€Œéå…·ä½“å®ç°
- ä¾¿äºå•å…ƒæµ‹è¯•å’Œæ¨¡å—æ›¿æ¢

## ç»Ÿä¸€å¯¼å‡º

æ¯ä¸ªæ¨¡å—éƒ½æä¾›äº† `index.dart` æ–‡ä»¶è¿›è¡Œç»Ÿä¸€å¯¼å‡ºï¼š

- åªå¯¼å‡ºç«¯å£æ¥å£å’Œå…¬å¼€çš„æœåŠ¡ç±»
- ä¸å¯¼å‡ºå†…éƒ¨å®ç°ç»†èŠ‚
- æä¾›æ¸…æ™°çš„æ¨¡å—è¾¹ç•Œ

## é‡æ„æ”¶ç›Š

1. **å¯ç»´æŠ¤æ€§æå‡**ï¼šæ¸…æ™°çš„æ¨¡å—è¾¹ç•Œï¼Œæ˜“äºå®šä½å’Œä¿®æ”¹ä»£ç 
2. **å¯æµ‹è¯•æ€§å¢å¼º**ï¼šæ¥å£æŠ½ç¦»ä¾¿äº mock å’Œå•å…ƒæµ‹è¯•
3. **å¯æ‰©å±•æ€§æ”¹å–„**ï¼šæ–°åŠŸèƒ½å¯ä»¥ç‹¬ç«‹å¼€å‘å’Œé›†æˆ
4. **å›¢é˜Ÿåä½œä¼˜åŒ–**ï¼šä¸åŒå¼€å‘è€…å¯ä»¥å¹¶è¡Œå¼€å‘ä¸åŒæ¨¡å—
5. **ä¾èµ–ç®¡ç†ç®€åŒ–**ï¼šæ˜ç¡®çš„ä¾èµ–æ–¹å‘ï¼Œé¿å…å¾ªç¯ä¾èµ–

## éªŒè¯ç»“æœ

- âœ… å†’çƒŸæµ‹è¯•é€šè¿‡
- âœ… ç›®å½•ç»“æ„æ­£ç¡®ç»„ç»‡
- âœ… æ¥å£å®šä¹‰å®Œæ•´
- âœ… ä¾èµ–æ–¹å‘æ­£ç¡®
- âœ… å¯¼å…¥è·¯å¾„æ›´æ–°å®Œæˆ

## åç»­å»ºè®®

1. **å®Œå–„å•å…ƒæµ‹è¯•**ï¼šä¸ºæ¯ä¸ªç«¯å£æ¥å£ç¼–å†™å¯¹åº”çš„æµ‹è¯•
2. **ä¾èµ–æ³¨å…¥é…ç½®**ï¼šåœ¨åº”ç”¨å¯åŠ¨æ—¶é…ç½®ä¾èµ–æ³¨å…¥
3. **æ–‡æ¡£æ›´æ–°**ï¼šæ›´æ–° API æ–‡æ¡£å’Œå¼€å‘æŒ‡å—
4. **æ€§èƒ½ç›‘æ§**ï¼šç›‘æ§é‡æ„åçš„æ€§èƒ½è¡¨ç°
5. **å›¢é˜ŸåŸ¹è®­**ï¼šç¡®ä¿å›¢é˜Ÿæˆå‘˜äº†è§£æ–°çš„æ¨¡å—ç»“æ„
