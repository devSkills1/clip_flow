# 项目开发规则

## 核心规则

### 1. API 使用规范
- **禁止使用弃用API**：不得使用任何标记为 `@deprecated` 的类、方法、属性或构造函数
- **及时更新依赖**：定期检查并更新到最新稳定版本的依赖包
- **遵循官方迁移指南**：当API发生变更时，严格按照官方迁移文档进行更新

### 2. UI/UX 设计规范
- **Material Design 3**：严格遵循 Material Design 3 设计规范
- **使用现代颜色系统**：优先使用 `ColorScheme` 中的语义化颜色令牌
- **响应式设计**：确保UI在不同屏幕尺寸下的良好表现
- **无障碍性**：遵循WCAG 2.1 AA级无障碍标准

### 3. 依赖与工具使用规范
- 优先使用官方 API 解决问题，非必要不引入第三方库；如确需使用第三方库，需事先征求我的同意，并在 PR 中给出充分理由（功能必要性、体积/性能影响、维护活跃度、License、替代方案对比）
- 优先检查项目中是否已有可复用的封装/工具，禁止重复造轮子；若现有封装不满足需求，需说明差距与新增原因

## 代码质量规范

### 4. 代码结构
- **Clean Architecture**：采用清晰的分层架构（Presentation、Domain、Data）
- **SOLID原则**：遵循单一职责、开闭、里氏替换、接口隔离、依赖倒置原则
- **DRY原则**：避免重复代码，提取公共组件和工具函数

### 5. 命名规范
- **语义化命名**：使用清晰、有意义的变量和函数名
- **一致性**：在整个项目中保持命名风格的一致性
- **英文命名**：代码中使用英文命名，注释可使用中文

### 6. 常量和配置规范
- **禁止硬编码**：严禁在代码中直接使用魔法数字、硬编码字符串、颜色值等
- **使用常量文件**：所有常量必须定义在专门的常量文件中（如 `constants/` 目录）
- **语义化常量**：常量命名应具有明确的语义，便于理解和维护
- **分类管理**：按功能模块对常量进行分类，如颜色、尺寸、字符串等
- **统一引用**：项目中所有地方都应引用常量文件，而非重复定义

### 7. 文档规范
- **代码注释**：为复杂逻辑添加清晰的注释说明
- **API文档**：为公共接口提供完整的文档
- **README更新**：及时更新项目说明和使用指南

## 性能优化

### 8. 性能最佳实践
- **懒加载**：对大型组件和数据实施懒加载策略
- **内存管理**：及时释放不再使用的资源，避免内存泄漏
- **图片优化**：使用适当的图片格式和尺寸
- **状态管理**：合理使用状态管理，避免不必要的重建

### 9. 构建优化
- **代码分割**：合理分割代码包，减少初始加载时间
- **Tree Shaking**：移除未使用的代码
- **资源压缩**：压缩图片、字体等静态资源

## 安全规范

### 10. 数据安全
- **敏感信息保护**：不在代码中硬编码密钥、密码等敏感信息
- **输入验证**：对所有用户输入进行严格验证
- **权限控制**：实施最小权限原则

### 11. 依赖安全
- **依赖审计**：定期检查依赖包的安全漏洞
- **版本锁定**：使用具体版本号而非范围版本

## 测试规范

### 12. 测试覆盖
- **单元测试**：核心业务逻辑必须有单元测试覆盖
- **集成测试**：关键功能流程需要集成测试
- **UI测试**：重要用户交互需要UI自动化测试

### 13. 测试质量
- **测试独立性**：每个测试用例应该独立运行
- **测试可读性**：测试代码应该清晰易懂
- **边界测试**：包含边界条件和异常情况的测试

## 版本控制

### 14. Git 规范
- **提交信息**：遵循约定式提交规范（Conventional Commits）
- **分支策略**：采用 Git Flow 或 GitHub Flow 分支策略
- **代码审查**：所有代码变更必须经过代码审查

### 15. 发布管理
- **语义化版本**：遵循语义化版本控制（SemVer）
- **变更日志**：维护详细的变更日志
- **回滚策略**：制定清晰的版本回滚策略

## 团队协作

### 16. 代码风格
- **格式化工具**：使用统一的代码格式化工具
- **Lint规则**：严格遵循项目的Lint规则
- **编辑器配置**：使用统一的编辑器配置文件

### 17. 知识共享
- **技术文档**：记录重要的技术决策和架构设计
- **代码审查**：通过代码审查分享知识和最佳实践
- **定期回顾**：定期进行技术债务和代码质量回顾

### 18. 代码质量检查
- **静态分析**：定期运行 `flutter analyze` 检查代码质量问题
- **未使用代码清理**：及时清理未使用的 import、变量和方法
- **代码格式化**：使用 `dart format` 保持代码格式一致性
- **依赖清理**：定期检查并移除未使用的依赖包
- **性能分析**：使用 Flutter DevTools 进行性能分析和优化

---

*本规则文档会根据项目发展和技术演进持续更新*